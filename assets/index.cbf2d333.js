import{S as se,i as le,s as oe,e as u,a as _,t as v,b as at,c,d as $,f as r,g as D,n as te,h as w,j as x,m as F,k as L,l as y,o as S,p as R,u as it,q as Ce,r as ve,v as ct,w as $t,_ as g,x as wt,O as k,y as ut,z as dt,A as V,I as ke,B as It,C as $e,M as Lt,D as ne,E as yt,F as Be,G as b,H as re,J as T,K as ae,L as Nt,N as Tt,P as U,Q as Et,R as Ct,T as Bt,U as Oe,V as Ot,W as Mt,X as Ht,Y as xt,Z as Ft,$ as we,a0 as St,a1 as Rt}from"./vendor.e2af78c1.js";const jt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerpolicy&&(a.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?a.credentials="include":l.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(l){if(l.ep)return;l.ep=!0;const a=n(l);fetch(l.href,a)}};jt();const Me={days:0,hours:0,minutes:0,seconds:0},Dt=5850,mt={timestamp:0,height:0,time:"0"};function Vt(t){let e,n,s,l,a;return{c(){e=u("div"),n=u("span"),s=u("span"),l=_(),a=v(t[1]),at(s,"--value",t[0]),c(n,"class","font-mono text-8xl countdown"),c(e,"class","flex flex-col p-2 bg-neutral rounded-box text-neutral-content")},m(o,m){$(o,e,m),r(e,n),r(n,s),r(e,l),r(e,a)},p(o,[m]){m&1&&at(s,"--value",o[0]),m&2&&D(a,o[1])},i:te,o:te,d(o){o&&w(e)}}}function Yt(t,e,n){let{value:s=0}=e,{label:l=""}=e;return t.$$set=a=>{"value"in a&&n(0,s=a.value),"label"in a&&n(1,l=a.label)},[s,l]}class He extends se{constructor(e){super();le(this,e,Yt,Vt,oe,{value:0,label:1})}}function qt(t){let e,n,s,l,a,o,m;return n=new He({props:{label:"days",value:t[0].days}}),l=new He({props:{label:"hours",value:t[0].hours}}),o=new He({props:{label:"minutes",value:t[0].minutes}}),{c(){e=u("div"),x(n.$$.fragment),s=_(),x(l.$$.fragment),a=_(),x(o.$$.fragment),c(e,"class","grid grid-flow-col justify-center gap-5")},m(i,p){$(i,e,p),F(n,e,null),r(e,s),F(l,e,null),r(e,a),F(o,e,null),m=!0},p(i,[p]){const d={};p&1&&(d.value=i[0].days),n.$set(d);const A={};p&1&&(A.value=i[0].hours),l.$set(A);const C={};p&1&&(C.value=i[0].minutes),o.$set(C)},i(i){m||(L(n.$$.fragment,i),L(l.$$.fragment,i),L(o.$$.fragment,i),m=!0)},o(i){y(n.$$.fragment,i),y(l.$$.fragment,i),y(o.$$.fragment,i),m=!1},d(i){i&&w(e),S(n),S(l),S(o)}}}function Gt(t,e,n){let{time:s=Me}=e;return t.$$set=l=>{"time"in l&&n(0,s=l.time)},[s]}class Kt extends se{constructor(e){super();le(this,e,Gt,qt,oe,{time:0})}}function Ut(t){let e,n,s,l,a;return{c(){e=u("div"),n=u("span"),s=u("span"),l=v(t[0]),a=v(`
  blocks`),c(n,"class","font-mono text-8xl"),c(e,"class","flex flex-auto flex-col p-2 bg-neutral rounded-box text-neutral-content")},m(o,m){$(o,e,m),r(e,n),r(n,s),r(s,l),r(e,a)},p(o,[m]){m&1&&D(l,o[0])},i:te,o:te,d(o){o&&w(e)}}}function Pt(t,e,n){let{blocks:s=0}=e;return t.$$set=l=>{"blocks"in l&&n(0,s=l.blocks)},[s]}class Qt extends se{constructor(e){super();le(this,e,Pt,Ut,oe,{blocks:0})}}var Wt="data:image/png;base64,AAAAGGZ0eXBhdmlmAAAAAG1pZjFtaWFmAAAA0m1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAHBpY3QAAAAAAAAAAAAAAAAAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAAA8gAAAPgAAAAjaWluZgAAAAAAAQAAABVpbmZlAgAAAAABAABhdjAxAAAAAFZpcHJwAAAAOGlwY28AAAAUaXNwZQAAAAAAAAAoAAAAKAAAAAxhdjFDgT8AAAAAABBwaXhpAAAAAAMICAgAAAAWaXBtYQAAAAAAAAABAAEDAYIDAAABAG1kYXQSAAoJP9VnnLQENAVAMugBZS5DUTcgYAAQqA+sAAAAAAAAoVAYEEEVYBck/Cs/7nC7l0TeFCyL1pJ/YXjyVKaPXVLX/WtlF49C7yB9BpBD8GFnTYwbFxdnpcOyKoIyqcdikSQNNMOTJi6B5fugsob903TRBOOgYYVv2qFycemXC6VjKK2VpyWrON64NFni69cskX+EC39xMb1n+PDNYjs74wy+jk/k/ZQwubO9eV08FwdGqE1qtlZEAveLwn3UDwqHxh7zEYN56tdjqnMrJqjjvy8Su/rCEF7guQqVvNretXMnNt+R8fMDZYmmseQu+Hx5BqtSbFnzyA==",q;(function(t){t.DARK="dark",t.LIGHT="light"})(q||(q={}));const Xt=R({"mimir//CHURNINTERVAL":it([Ce,ct]),CHURNINTERVAL:it([Ce,ct])}),Zt=R({int_64_values:R({ChurnInterval:Ce})}),Jt=R({nextChurnHeight:ve}),ft=R({result:R({query:ve,data:R({value:R({block:R({header:R({time:ve,height:ve})})})})})}),At=q.DARK,pt="tcc-theme",zt=t=>t===q.DARK||t===q.LIGHT,ht=t=>document.documentElement.setAttribute("data-theme",t),en=()=>g.pipe(localStorage.getItem(pt),k.fromNullable,k.chain(k.fromPredicate(zt)),k.getOrElse(()=>At)),xe=wt(At),tn=()=>{const t=en();ht(t),xe.set(t)},gt=t=>{ht(t),localStorage.setItem(pt,t),xe.set(t)},nn=$t(xe,g.identity);function sn(t){let e,n,s,l,a;return n=new ke({props:{src:It,size:"24",solid:!0,class:"text-white-500"}}),{c(){e=u("button"),x(n.$$.fragment),c(e,"class","btn btn-circle btn-ghost")},m(o,m){$(o,e,m),F(n,e,null),s=!0,l||(a=$e(e,"click",t[2]),l=!0)},p:te,i(o){s||(L(n.$$.fragment,o),s=!0)},o(o){y(n.$$.fragment,o),s=!1},d(o){o&&w(e),S(n),l=!1,a()}}}function ln(t){let e,n,s,l,a;return n=new ke({props:{src:Lt,size:"24",solid:!0,class:"text-yellow-500"}}),{c(){e=u("button"),x(n.$$.fragment),c(e,"class","btn btn-circle btn-ghost")},m(o,m){$(o,e,m),F(n,e,null),s=!0,l||(a=$e(e,"click",t[1]),l=!0)},p:te,i(o){s||(L(n.$$.fragment,o),s=!0)},o(o){y(n.$$.fragment,o),s=!1},d(o){o&&w(e),S(n),l=!1,a()}}}function on(t){let e,n,s,l;const a=[ln,sn],o=[];function m(i,p){return i[0]===q.LIGHT?0:1}return n=m(t),s=o[n]=a[n](t),{c(){e=u("div"),s.c(),c(e,"class","flex-none")},m(i,p){$(i,e,p),o[n].m(e,null),l=!0},p(i,[p]){let d=n;n=m(i),n===d?o[n].p(i,p):(ut(),y(o[d],1,1,()=>{o[d]=null}),dt(),s=o[n],s?s.p(i,p):(s=o[n]=a[n](i),s.c()),L(s,1),s.m(e,null))},i(i){l||(L(s),l=!0)},o(i){y(s),l=!1},d(i){i&&w(e),o[n].d()}}}function rn(t,e,n){let s;return V(t,nn,o=>n(0,s=o)),[s,()=>gt(q.DARK),()=>gt(q.LIGHT)]}class an extends se{constructor(e){super();le(this,e,rn,on,oe,{})}}const cn=t=>!!t,bt=(t,e)=>cn(t)?t:e;ne.extend(yt);const Fe=bt("https://midgard.thorchain.info/v2","https://midgard.thorchain.info/v2"),un=bt("wss://rpc.thorchain.info/websocket","wss://rpc.thorchain.info/websocket"),dn=g.pipe(Be.getJSON(`${Fe}/thorchain/mimir`),b(t=>Xt.decode(t)),b(t=>T.mapLeft(e=>Error(`Failed to load mimir ${Oe.report(t)}`))(t)),re(1)),mn=g.pipe(dn,b(T.map(t=>t["mimir//CHURNINTERVAL"]||t.CHURNINTERVAL))),fn=g.pipe(Be.getJSON(`${Fe}/thorchain/constants`),b(t=>Zt.decode(t)),b(t=>T.mapLeft(e=>Error(`Failed to load constants from Midgard ${Oe.report(t)}`))(t)),re(1)),An=g.pipe(fn,b(T.map(t=>t.int_64_values.ChurnInterval))),Se=g.pipe(ae([mn,Nt(0,5*60*1e3)]),Tt(([t,e])=>g.pipe(t,T.fold(()=>An,n=>Ot(T.right(n))))),b(T.getOrElse(()=>0)),U(0)),pn=g.pipe(Be.getJSON(`${Fe}/network`),b(t=>Jt.decode(t)),b(t=>T.mapLeft(e=>Error(`Failed to load network data from Midgard ${Oe.report(t)}`))(t)),re(1)),Re=new Et([]),hn=Ct(un),gn=hn.multiplex(()=>({jsonrpc:"2.0",id:1,method:"subscribe",params:["tm.event='NewBlock'"]}),()=>({method:"unsubscribe",params:["tm.event='NewBlock'"]}),t=>g.pipe(ft.decode(t),T.fold(()=>!1,e=>e.result.query==="tm.event='NewBlock'"))).pipe(b(t=>g.pipe(ft.decode(t),T.fold(()=>mt,e=>({time:e.result.data.value.block.header.time,timestamp:ne(e.result.data.value.block.header.time).valueOf(),height:parseInt(e.result.data.value.block.header.height)})))),U(mt),Bt(),b(([t,e])=>{if(t.timestamp>0){const n=ne(e.timestamp).diff(ne(t.timestamp));Re.next([...Re.getValue(),n])}return e}),re(1)),_t="tcc-btime",je=()=>g.pipe(localStorage.getItem(_t),k.fromNullable,k.map(parseInt),k.chain(k.fromPredicate(Number.isInteger)),k.getOrElse(()=>Dt)),De=Re.pipe(b(t=>t.length?g.pipe(t,Mt.reduce(0,(e,n)=>e+n),k.fromPredicate(e=>e>0),k.map(e=>Math.round(e/t.length)),k.map(e=>Math.round(e/100)*100),k.map(e=>Math.min(e,6e3)),k.map(e=>Math.max(e,5500)),k.map(e=>(localStorage.setItem(_t,e.toString()),e)),k.getOrElse(()=>je())):je()),re(1),U(je())),vt=g.pipe(gn,b(({height:t})=>t),U(0)),kt=g.pipe(pn,b(t=>g.pipe(t,T.map(({nextChurnHeight:e})=>parseInt(e)))),b(T.getOrElse(()=>0)),U(0)),Ve=g.pipe(ae([kt,vt]),b(([t,e])=>!t||!e?0:t-e)),bn=g.pipe(ae([Se,Ve]),b(([t,e])=>!t||!e?1:e*100/t)),_n=g.pipe(ae([Ve,De]),b(([t,e])=>{const n=t*e,s=ne.duration(n);return{seconds:s.get("seconds"),minutes:s.get("minutes"),hours:s.get("hours"),days:s.get("days")}}),U(Me)),vn=g.pipe(ae([Se,De]),b(([t,e])=>{const n=t*e,s=ne.duration(n);return{seconds:0,minutes:s.get("minutes"),hours:s.get("hours"),days:s.get("days")}}),U(Me));function kn(t){let e,n;return e=new Qt({props:{blocks:t[2]}}),{c(){x(e.$$.fragment)},m(s,l){F(e,s,l),n=!0},p(s,l){const a={};l&4&&(a.blocks=s[2]),e.$set(a)},i(s){n||(L(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){S(e,s)}}}function $n(t){let e,n;return e=new Kt({props:{time:t[1]}}),{c(){x(e.$$.fragment)},m(s,l){F(e,s,l),n=!0},p(s,l){const a={};l&2&&(a.time=s[1]),e.$set(a)},i(s){n||(L(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){S(e,s)}}}function wn(t){let e,n;return{c(){e=v(t[8]),n=v(" blocks")},m(s,l){$(s,e,l),$(s,n,l)},p(s,l){l&256&&D(e,s[8])},d(s){s&&w(e),s&&w(n)}}}function In(t){let e=t[7].days+"",n,s,l=t[7].hours+"",a,o,m=t[7].minutes+"",i,p;return{c(){n=v(e),s=v("d "),a=v(l),o=v("h "),i=v(m),p=v("m")},m(d,A){$(d,n,A),$(d,s,A),$(d,a,A),$(d,o,A),$(d,i,A),$(d,p,A)},p(d,A){A&128&&e!==(e=d[7].days+"")&&D(n,e),A&128&&l!==(l=d[7].hours+"")&&D(a,l),A&128&&m!==(m=d[7].minutes+"")&&D(i,m)},d(d){d&&w(n),d&&w(s),d&&w(a),d&&w(o),d&&w(i),d&&w(p)}}}function Ln(t){let e,n,s,l,a,o,m,i,p,d,A,C,B,h,Ye,N,E,Ie,ie,P,Q,ce,qe,W,O,ue,X,Ge,de,Ke,me,Le,Ue,Z,Pe,fe=(t[5]/1e3).toFixed(2)+"",ye,Qe,We,M,Ae,J,Xe,pe,Ze,he,Ne,Je,z,ze,et,ge,ee,G,tt,K,nt,be,j,Te,st;i=new an({});const lt=[$n,kn],Y=[];function ot(f,I){return f[0]==="human"?0:1}N=ot(t),E=Y[N]=lt[N](t),X=new ke({props:{src:Ht,size:"48",class:"outline-none"}}),J=new ke({props:{src:xt,size:"48",class:"outline-none"}});function rt(f,I){return f[0]==="human"?In:wn}let _e=rt(t),H=_e(t);return{c(){e=u("div"),n=u("div"),s=u("div"),l=u("a"),a=u("img"),m=_(),x(i.$$.fragment),p=_(),d=u("main"),A=u("div"),C=u("div"),B=u("div"),h=u("h1"),h.textContent="CHURN COUNTDOWN",Ye=_(),E.c(),Ie=_(),ie=u("div"),P=u("div"),Q=u("progress"),qe=_(),W=u("div"),O=u("div"),ue=u("div"),x(X.$$.fragment),Ge=_(),de=u("div"),de.textContent="Current block",Ke=_(),me=u("div"),Le=v(t[4]),Ue=_(),Z=u("div"),Pe=v("~"),ye=v(fe),Qe=v(" s/b"),We=_(),M=u("div"),Ae=u("div"),x(J.$$.fragment),Xe=_(),pe=u("div"),pe.textContent="Churn block",Ze=_(),he=u("div"),Ne=v(t[6]),Je=_(),z=u("div"),ze=v(`Churn interval:
              `),H.c(),et=_(),ge=u("div"),ee=u("div"),G=u("button"),G.innerHTML="Human<br/> time",tt=_(),K=u("button"),K.innerHTML="Block<br/>time",nt=_(),be=u("footer"),be.innerHTML=`<div data-tip="commit 79b62d0
" class="tooltip w-full"><a class="btn btn-circle btn-ghost drawer-button" href="https://github.com/veado/thorchain-churn-countdown/commit/79b62d0
"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="inline-block w-6 h-6 fill-current"><path d="M256,32C132.3,32,32,134.9,32,261.7c0,101.5,64.2,187.5,153.2,217.9a17.56,17.56,0,0,0,3.8.4c8.3,0,11.5-6.1,11.5-11.4,0-5.5-.2-19.9-.3-39.1a102.4,102.4,0,0,1-22.6,2.7c-43.1,0-52.9-33.5-52.9-33.5-10.2-26.5-24.9-33.6-24.9-33.6-19.5-13.7-.1-14.1,1.4-14.1h.1c22.5,2,34.3,23.8,34.3,23.8,11.2,19.6,26.2,25.1,39.6,25.1a63,63,0,0,0,25.6-6c2-14.8,7.8-24.9,14.2-30.7-49.7-5.8-102-25.5-102-113.5,0-25.1,8.7-45.6,23-61.6-2.3-5.8-10-29.2,2.2-60.8a18.64,18.64,0,0,1,5-.5c8.1,0,26.4,3.1,56.6,24.1a208.21,208.21,0,0,1,112.2,0c30.2-21,48.5-24.1,56.6-24.1a18.64,18.64,0,0,1,5,.5c12.2,31.6,4.5,55,2.2,60.8,14.3,16.1,23,36.6,23,61.6,0,88.2-52.4,107.6-102.3,113.3,8,7.1,15.2,21.1,15.2,42.5,0,30.7-.3,55.5-.3,63,0,5.4,3.1,11.5,11.4,11.5a19.35,19.35,0,0,0,4-.4C415.9,449.2,480,363.1,480,261.7,480,134.9,379.7,32,256,32Z"></path></svg></a></div>`,Ft(a.src,o=Wt)||c(a,"src",o),c(a,"alt","logo"),c(a,"class","mask mask-circle"),c(l,"class","btn btn-circle btn-ghost"),c(l,"href","https://docs.thorchain.org"),c(s,"class","flex-1 px-2 mx-2 py-2"),c(n,"class","navbar mb-2 shadow-lg bg-neutral text-neutral-content"),c(h,"class","text-4xl font-bold pt-2 pb-8"),c(Q,"class","progress progress-primary h-8"),Q.value=t[3],c(Q,"max","100"),c(P,"data-tip",ce=""+(t[3].toFixed(2)+"% left")),c(P,"class","tooltip w-full tooltip-bottom"),c(ie,"class","pt-8"),c(B,"class","card-body"),c(ue,"class","stat-figure"),c(de,"class","stat-title"),c(me,"class","stat-value"),c(Z,"class","stat-desc"),c(O,"class","stat"),c(Ae,"class","stat-figure"),c(pe,"class","stat-title"),c(he,"class","stat-value"),c(z,"class","stat-desc"),c(M,"class","stat"),c(W,"class","w-full shadow stats"),c(C,"class","card text-center shadow-2xl min-w-[36em]"),c(G,"class","btn btn-lg"),we(G,"btn-active",t[0]==="human"),c(K,"class","btn btn-lg"),we(K,"btn-active",t[0]==="block"),c(ee,"class","btn-group"),c(ge,"class","flex justify-center items-center pt-8"),c(d,"class","grid justify-center pt-8 flex-grow"),c(be,"class","mt-20 p-4 footer text-base-content footer-center"),c(e,"class","flex flex-col h-screen")},m(f,I){$(f,e,I),r(e,n),r(n,s),r(s,l),r(l,a),r(n,m),F(i,n,null),r(e,p),r(e,d),r(d,A),r(A,C),r(C,B),r(B,h),r(B,Ye),Y[N].m(B,null),r(B,Ie),r(B,ie),r(ie,P),r(P,Q),r(C,qe),r(C,W),r(W,O),r(O,ue),F(X,ue,null),r(O,Ge),r(O,de),r(O,Ke),r(O,me),r(me,Le),r(O,Ue),r(O,Z),r(Z,Pe),r(Z,ye),r(Z,Qe),r(W,We),r(W,M),r(M,Ae),F(J,Ae,null),r(M,Xe),r(M,pe),r(M,Ze),r(M,he),r(he,Ne),r(M,Je),r(M,z),r(z,ze),H.m(z,null),r(A,et),r(A,ge),r(ge,ee),r(ee,G),r(ee,tt),r(ee,K),r(e,nt),r(e,be),j=!0,Te||(st=[$e(G,"click",t[9]),$e(K,"click",t[10])],Te=!0)},p(f,[I]){let Ee=N;N=ot(f),N===Ee?Y[N].p(f,I):(ut(),y(Y[Ee],1,1,()=>{Y[Ee]=null}),dt(),E=Y[N],E?E.p(f,I):(E=Y[N]=lt[N](f),E.c()),L(E,1),E.m(B,Ie)),(!j||I&8)&&(Q.value=f[3]),(!j||I&8&&ce!==(ce=""+(f[3].toFixed(2)+"% left")))&&c(P,"data-tip",ce),(!j||I&16)&&D(Le,f[4]),(!j||I&32)&&fe!==(fe=(f[5]/1e3).toFixed(2)+"")&&D(ye,fe),(!j||I&64)&&D(Ne,f[6]),_e===(_e=rt(f))&&H?H.p(f,I):(H.d(1),H=_e(f),H&&(H.c(),H.m(z,null))),I&1&&we(G,"btn-active",f[0]==="human"),I&1&&we(K,"btn-active",f[0]==="block")},i(f){j||(L(i.$$.fragment,f),L(E),L(X.$$.fragment,f),L(J.$$.fragment,f),j=!0)},o(f){y(i.$$.fragment,f),y(E),y(X.$$.fragment,f),y(J.$$.fragment,f),j=!1},d(f){f&&w(e),S(i),Y[N].d(),S(X),S(J),H.d(),Te=!1,St(st)}}}function yn(t,e,n){let s,l,a,o,m,i,p,d;V(t,_n,h=>n(1,s=h)),V(t,Ve,h=>n(2,l=h)),V(t,bn,h=>n(3,a=h)),V(t,vt,h=>n(4,o=h)),V(t,De,h=>n(5,m=h)),V(t,kt,h=>n(6,i=h)),V(t,vn,h=>n(7,p=h)),V(t,Se,h=>n(8,d=h));let A="human";return Rt(async()=>{tn()}),[A,s,l,a,o,m,i,p,d,()=>n(0,A="human"),()=>n(0,A="block")]}class Nn extends se{constructor(e){super();le(this,e,yn,Ln,oe,{})}}new Nn({target:document.getElementById("app")});
