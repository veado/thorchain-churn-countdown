import{S as ae,i as ie,s as ce,e as u,a as h,t as v,b as At,c as i,d as $,f as o,g as D,n as se,h as w,j as H,m as F,k as L,l as y,o as S,p as R,u as gt,q as Se,r as ye,v as bt,w as Bt,_ as b,x as Ot,O as k,y as ht,z as _t,A as V,I as Ne,B as xt,C as Ce,M as Mt,D as le,E as Ht,F as Re,G as _,H as ue,J as C,K as me,L as Ft,N as St,P as U,Q as Rt,R as jt,T as Dt,U as je,V as Vt,W as Yt,X as qt,Y as Gt,Z as vt,$ as Kt,a0 as Ee,a1 as Ut,a2 as Pt}from"./vendor.95ddb9f8.js";const Qt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerpolicy&&(a.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?a.credentials="include":l.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(l){if(l.ep)return;l.ep=!0;const a=n(l);fetch(l.href,a)}};Qt();const De={days:0,hours:0,minutes:0,seconds:0},Wt=5850,kt={timestamp:0,height:0,time:"0"};function Xt(t){let e,n,s,l,a;return{c(){e=u("div"),n=u("span"),s=u("span"),l=h(),a=v(t[1]),At(s,"--value",t[0]),i(n,"class","font-mono text-8xl countdown"),i(e,"class","flex flex-col p-2 bg-neutral rounded-box text-neutral-content")},m(r,d){$(r,e,d),o(e,n),o(n,s),o(e,l),o(e,a)},p(r,[d]){d&1&&At(s,"--value",r[0]),d&2&&D(a,r[1])},i:se,o:se,d(r){r&&w(e)}}}function Zt(t,e,n){let{value:s=0}=e,{label:l=""}=e;return t.$$set=a=>{"value"in a&&n(0,s=a.value),"label"in a&&n(1,l=a.label)},[s,l]}class Ve extends ae{constructor(e){super();ie(this,e,Zt,Xt,ce,{value:0,label:1})}}function Jt(t){let e,n,s,l,a,r,d;return n=new Ve({props:{label:"days",value:t[0].days}}),l=new Ve({props:{label:"hours",value:t[0].hours}}),r=new Ve({props:{label:"minutes",value:t[0].minutes}}),{c(){e=u("div"),H(n.$$.fragment),s=h(),H(l.$$.fragment),a=h(),H(r.$$.fragment),i(e,"class","grid grid-flow-col justify-center gap-5")},m(c,A){$(c,e,A),F(n,e,null),o(e,s),F(l,e,null),o(e,a),F(r,e,null),d=!0},p(c,[A]){const m={};A&1&&(m.value=c[0].days),n.$set(m);const p={};A&1&&(p.value=c[0].hours),l.$set(p);const T={};A&1&&(T.value=c[0].minutes),r.$set(T)},i(c){d||(L(n.$$.fragment,c),L(l.$$.fragment,c),L(r.$$.fragment,c),d=!0)},o(c){y(n.$$.fragment,c),y(l.$$.fragment,c),y(r.$$.fragment,c),d=!1},d(c){c&&w(e),S(n),S(l),S(r)}}}function zt(t,e,n){let{time:s=De}=e;return t.$$set=l=>{"time"in l&&n(0,s=l.time)},[s]}class en extends ae{constructor(e){super();ie(this,e,zt,Jt,ce,{time:0})}}function tn(t){let e,n,s,l,a;return{c(){e=u("div"),n=u("span"),s=u("span"),l=v(t[0]),a=v(`
  blocks`),i(n,"class","font-mono text-8xl"),i(e,"class","flex flex-auto flex-col p-2 bg-neutral rounded-box text-neutral-content")},m(r,d){$(r,e,d),o(e,n),o(n,s),o(s,l),o(e,a)},p(r,[d]){d&1&&D(l,r[0])},i:se,o:se,d(r){r&&w(e)}}}function nn(t,e,n){let{blocks:s=0}=e;return t.$$set=l=>{"blocks"in l&&n(0,s=l.blocks)},[s]}class sn extends ae{constructor(e){super();ie(this,e,nn,tn,ce,{blocks:0})}}var ln="data:image/png;base64,AAAAGGZ0eXBhdmlmAAAAAG1pZjFtaWFmAAAA0m1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAHBpY3QAAAAAAAAAAAAAAAAAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAAA8gAAAPgAAAAjaWluZgAAAAAAAQAAABVpbmZlAgAAAAABAABhdjAxAAAAAFZpcHJwAAAAOGlwY28AAAAUaXNwZQAAAAAAAAAoAAAAKAAAAAxhdjFDgT8AAAAAABBwaXhpAAAAAAMICAgAAAAWaXBtYQAAAAAAAAABAAEDAYIDAAABAG1kYXQSAAoJP9VnnLQENAVAMugBZS5DUTcgYAAQqA+sAAAAAAAAoVAYEEEVYBck/Cs/7nC7l0TeFCyL1pJ/YXjyVKaPXVLX/WtlF49C7yB9BpBD8GFnTYwbFxdnpcOyKoIyqcdikSQNNMOTJi6B5fugsob903TRBOOgYYVv2qFycemXC6VjKK2VpyWrON64NFni69cskX+EC39xMb1n+PDNYjs74wy+jk/k/ZQwubO9eV08FwdGqE1qtlZEAveLwn3UDwqHxh7zEYN56tdjqnMrJqjjvy8Su/rCEF7guQqVvNretXMnNt+R8fMDZYmmseQu+Hx5BqtSbFnzyA==",q;(function(t){t.DARK="dark",t.LIGHT="light"})(q||(q={}));const on=R({"mimir//CHURNINTERVAL":gt([Se,bt]),CHURNINTERVAL:gt([Se,bt])}),rn=R({int_64_values:R({ChurnInterval:Se})}),an=R({nextChurnHeight:ye}),$t=R({result:R({query:ye,data:R({value:R({block:R({header:R({time:ye,height:ye})})})})})}),wt=q.DARK,It="tcc-theme",cn=t=>t===q.DARK||t===q.LIGHT,Lt=t=>document.documentElement.setAttribute("data-theme",t),un=()=>b.pipe(localStorage.getItem(It),k.fromNullable,k.chain(k.fromPredicate(cn)),k.getOrElse(()=>wt)),Ye=Ot(wt),mn=()=>{const t=un();Lt(t),Ye.set(t)},yt=t=>{Lt(t),localStorage.setItem(It,t),Ye.set(t)},dn=Bt(Ye,b.identity);function fn(t){let e,n,s,l,a;return n=new Ne({props:{src:xt,size:"24",solid:!0,class:"text-white-500"}}),{c(){e=u("button"),H(n.$$.fragment),i(e,"class","btn btn-circle btn-ghost")},m(r,d){$(r,e,d),F(n,e,null),s=!0,l||(a=Ce(e,"click",t[2]),l=!0)},p:se,i(r){s||(L(n.$$.fragment,r),s=!0)},o(r){y(n.$$.fragment,r),s=!1},d(r){r&&w(e),S(n),l=!1,a()}}}function pn(t){let e,n,s,l,a;return n=new Ne({props:{src:Mt,size:"24",solid:!0,class:"text-yellow-500"}}),{c(){e=u("button"),H(n.$$.fragment),i(e,"class","btn btn-circle btn-ghost")},m(r,d){$(r,e,d),F(n,e,null),s=!0,l||(a=Ce(e,"click",t[1]),l=!0)},p:se,i(r){s||(L(n.$$.fragment,r),s=!0)},o(r){y(n.$$.fragment,r),s=!1},d(r){r&&w(e),S(n),l=!1,a()}}}function An(t){let e,n,s,l;const a=[pn,fn],r=[];function d(c,A){return c[0]===q.LIGHT?0:1}return n=d(t),s=r[n]=a[n](t),{c(){e=u("div"),s.c(),i(e,"class","flex-none")},m(c,A){$(c,e,A),r[n].m(e,null),l=!0},p(c,[A]){let m=n;n=d(c),n===m?r[n].p(c,A):(ht(),y(r[m],1,1,()=>{r[m]=null}),_t(),s=r[n],s?s.p(c,A):(s=r[n]=a[n](c),s.c()),L(s,1),s.m(e,null))},i(c){l||(L(s),l=!0)},o(c){y(s),l=!1},d(c){c&&w(e),r[n].d()}}}function gn(t,e,n){let s;return V(t,dn,r=>n(0,s=r)),[s,()=>yt(q.DARK),()=>yt(q.LIGHT)]}class bn extends ae{constructor(e){super();ie(this,e,gn,An,ce,{})}}const hn=t=>!!t,Nt=(t,e)=>hn(t)?t:e;le.extend(Ht);const qe=Nt("https://midgard.thorchain.info/v2","https://midgard.thorchain.info/v2"),_n=Nt("wss://rpc.thorchain.info/websocket","wss://rpc.thorchain.info/websocket"),vn=b.pipe(Re.getJSON(`${qe}/thorchain/mimir`),_(t=>on.decode(t)),_(t=>C.mapLeft(e=>Error(`Failed to load mimir ${je.report(t)}`))(t)),ue(1)),kn=b.pipe(vn,_(C.map(t=>t["mimir//CHURNINTERVAL"]||t.CHURNINTERVAL))),$n=b.pipe(Re.getJSON(`${qe}/thorchain/constants`),_(t=>rn.decode(t)),_(t=>C.mapLeft(e=>Error(`Failed to load constants from Midgard ${je.report(t)}`))(t)),ue(1)),wn=b.pipe($n,_(C.map(t=>t.int_64_values.ChurnInterval))),Ge=b.pipe(me([kn,Ft(0,5*60*1e3)]),St(([t,e])=>b.pipe(t,C.fold(()=>wn,n=>Vt(C.right(n))))),_(C.getOrElse(()=>0)),U(0)),In=b.pipe(Re.getJSON(`${qe}/network`),_(t=>an.decode(t)),_(t=>C.mapLeft(e=>Error(`Failed to load network data from Midgard ${je.report(t)}`))(t)),ue(1)),Ke=new Rt([]),Ln=jt(_n),yn=Ln.multiplex(()=>({jsonrpc:"2.0",id:1,method:"subscribe",params:["tm.event='NewBlock'"]}),()=>({method:"unsubscribe",params:["tm.event='NewBlock'"]}),t=>b.pipe($t.decode(t),C.fold(()=>!1,e=>e.result.query==="tm.event='NewBlock'"))).pipe(_(t=>b.pipe($t.decode(t),C.fold(()=>kt,e=>({time:e.result.data.value.block.header.time,timestamp:le(e.result.data.value.block.header.time).valueOf(),height:parseInt(e.result.data.value.block.header.height)})))),U(kt),Dt(),_(([t,e])=>{if(t.timestamp>0){const n=le(e.timestamp).diff(le(t.timestamp));Ke.next([...Ke.getValue(),n])}return e}),ue(1)),Ct="tcc-btime",Ue=()=>b.pipe(localStorage.getItem(Ct),k.fromNullable,k.map(parseInt),k.chain(k.fromPredicate(Number.isInteger)),k.getOrElse(()=>Wt)),Pe=Ke.pipe(_(t=>t.length?b.pipe(t,Yt.reduce(0,(e,n)=>e+n),k.fromPredicate(e=>e>0),k.map(e=>Math.round(e/t.length)),k.map(e=>Math.round(e/100)*100),k.map(e=>Math.min(e,6e3)),k.map(e=>Math.max(e,5500)),k.map(e=>(localStorage.setItem(Ct,e.toString()),e)),k.getOrElse(()=>Ue())):Ue()),ue(1),U(Ue())),Et=b.pipe(yn,_(({height:t})=>t),U(0)),Tt=b.pipe(In,_(t=>b.pipe(t,C.map(({nextChurnHeight:e})=>parseInt(e)))),_(C.getOrElse(()=>0)),U(0)),Qe=b.pipe(me([Tt,Et]),_(([t,e])=>{if(!t||!e)return 0;const n=t-e;return n>0?n:0})),Nn=b.pipe(me([Ge,Qe]),_(([t,e])=>!t||!e?0:e*100/t)),Cn=b.pipe(me([Qe,Pe]),_(([t,e])=>{const n=t*e,s=le.duration(n);return{seconds:s.get("seconds"),minutes:s.get("minutes"),hours:s.get("hours"),days:s.get("days")}}),U(De)),En=b.pipe(me([Ge,Pe]),_(([t,e])=>{const n=t*e,s=le.duration(n);return{seconds:0,minutes:s.get("minutes"),hours:s.get("hours"),days:s.get("days")}}),U(De));function Tn(t){let e,n;return e=new sn({props:{blocks:t[2]}}),{c(){H(e.$$.fragment)},m(s,l){F(e,s,l),n=!0},p(s,l){const a={};l&4&&(a.blocks=s[2]),e.$set(a)},i(s){n||(L(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){S(e,s)}}}function Bn(t){let e,n;return e=new en({props:{time:t[1]}}),{c(){H(e.$$.fragment)},m(s,l){F(e,s,l),n=!0},p(s,l){const a={};l&2&&(a.time=s[1]),e.$set(a)},i(s){n||(L(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){S(e,s)}}}function On(t){let e,n;return{c(){e=v(t[8]),n=v(" blocks")},m(s,l){$(s,e,l),$(s,n,l)},p(s,l){l&256&&D(e,s[8])},d(s){s&&w(e),s&&w(n)}}}function xn(t){let e=t[7].days+"",n,s,l=t[7].hours+"",a,r,d=t[7].minutes+"",c,A;return{c(){n=v(e),s=v("d "),a=v(l),r=v("h "),c=v(d),A=v("m")},m(m,p){$(m,n,p),$(m,s,p),$(m,a,p),$(m,r,p),$(m,c,p),$(m,A,p)},p(m,p){p&128&&e!==(e=m[7].days+"")&&D(n,e),p&128&&l!==(l=m[7].hours+"")&&D(a,l),p&128&&d!==(d=m[7].minutes+"")&&D(c,d)},d(m){m&&w(n),m&&w(s),m&&w(a),m&&w(r),m&&w(c),m&&w(A)}}}function Mn(t){let e,n,s,l,a,r,d,c,A,m,p,T,B,g,We,N,E,Te,de,P,Q,fe,pe,Xe,W,O,Ae,X,Ze,ge,Je,be,Be,ze,Z,et,he=(t[5]/1e3).toFixed(2)+"",Oe,tt,nt,x,_e,J,st,ve,lt,ke,xe,ot,z,rt,at,$e,ee,G,it,K,ct,we,oe,re,te,ne,Me,ut,Ie,j,He,mt;c=new bn({});const dt=[Bn,Tn],Y=[];function ft(f,I){return f[0]==="human"?0:1}N=ft(t),E=Y[N]=dt[N](t),X=new Ne({props:{src:qt,size:"48",class:"outline-none"}}),J=new Ne({props:{src:Gt,size:"48",class:"outline-none"}});function pt(f,I){return f[0]==="human"?xn:On}let Le=pt(t),M=Le(t);return{c(){e=u("div"),n=u("div"),s=u("div"),l=u("a"),a=u("img"),d=h(),H(c.$$.fragment),A=h(),m=u("main"),p=u("div"),T=u("div"),B=u("div"),g=u("h1"),g.textContent="CHURN COUNTDOWN",We=h(),E.c(),Te=h(),de=u("div"),P=u("div"),Q=u("progress"),Xe=h(),W=u("div"),O=u("div"),Ae=u("div"),H(X.$$.fragment),Ze=h(),ge=u("div"),ge.textContent="Current block",Je=h(),be=u("div"),Be=v(t[4]),ze=h(),Z=u("div"),et=v("~"),Oe=v(he),tt=v(" s/b"),nt=h(),x=u("div"),_e=u("div"),H(J.$$.fragment),st=h(),ve=u("div"),ve.textContent="Churn block",lt=h(),ke=u("div"),xe=v(t[6]),ot=h(),z=u("div"),rt=v(`Churn interval:
              `),M.c(),at=h(),$e=u("div"),ee=u("div"),G=u("button"),G.innerHTML="Human<br/> time",it=h(),K=u("button"),K.innerHTML="Block<br/>time",ct=h(),we=u("footer"),oe=u("div"),re=u("a"),te=u("div"),ne=vt("svg"),Me=vt("path"),ut=h(),Ie=u("span"),Ie.textContent="v1.0.0",Kt(a.src,r=ln)||i(a,"src",r),i(a,"alt","logo"),i(a,"class","mask mask-circle"),i(l,"class","btn btn-circle btn-ghost"),i(l,"href","https://docs.thorchain.org"),i(s,"class","flex-1 px-2 mx-2 py-2"),i(n,"class","navbar mb-2 shadow-lg bg-neutral text-neutral-content"),i(g,"class","text-4xl font-bold pt-2 pb-8"),i(Q,"class","progress progress-primary h-8"),Q.value=fe=100-t[3],i(Q,"max","100"),i(P,"data-tip",pe=""+(100-Number(t[3].toFixed(2))+"% completed")),i(P,"class","tooltip w-full tooltip-bottom"),i(de,"class","pt-8"),i(B,"class","card-body"),i(Ae,"class","stat-figure"),i(ge,"class","stat-title"),i(be,"class","stat-value"),i(Z,"class","stat-desc"),i(O,"class","stat"),i(_e,"class","stat-figure"),i(ve,"class","stat-title"),i(ke,"class","stat-value"),i(z,"class","stat-desc"),i(x,"class","stat"),i(W,"class","w-full shadow stats"),i(T,"class","card text-center shadow-2xl min-w-[36em]"),i(G,"class","btn btn-lg"),Ee(G,"btn-active",t[0]==="human"),i(K,"class","btn btn-lg"),Ee(K,"btn-active",t[0]==="block"),i(ee,"class","btn-group"),i($e,"class","flex justify-center items-center pt-8"),i(m,"class","grid justify-center pt-8 flex-grow"),i(Me,"d","M256,32C132.3,32,32,134.9,32,261.7c0,101.5,64.2,187.5,153.2,217.9a17.56,17.56,0,0,0,3.8.4c8.3,0,11.5-6.1,11.5-11.4,0-5.5-.2-19.9-.3-39.1a102.4,102.4,0,0,1-22.6,2.7c-43.1,0-52.9-33.5-52.9-33.5-10.2-26.5-24.9-33.6-24.9-33.6-19.5-13.7-.1-14.1,1.4-14.1h.1c22.5,2,34.3,23.8,34.3,23.8,11.2,19.6,26.2,25.1,39.6,25.1a63,63,0,0,0,25.6-6c2-14.8,7.8-24.9,14.2-30.7-49.7-5.8-102-25.5-102-113.5,0-25.1,8.7-45.6,23-61.6-2.3-5.8-10-29.2,2.2-60.8a18.64,18.64,0,0,1,5-.5c8.1,0,26.4,3.1,56.6,24.1a208.21,208.21,0,0,1,112.2,0c30.2-21,48.5-24.1,56.6-24.1a18.64,18.64,0,0,1,5,.5c12.2,31.6,4.5,55,2.2,60.8,14.3,16.1,23,36.6,23,61.6,0,88.2-52.4,107.6-102.3,113.3,8,7.1,15.2,21.1,15.2,42.5,0,30.7-.3,55.5-.3,63,0,5.4,3.1,11.5,11.4,11.5a19.35,19.35,0,0,0,4-.4C415.9,449.2,480,363.1,480,261.7,480,134.9,379.7,32,256,32Z"),i(ne,"xmlns","http://www.w3.org/2000/svg"),i(ne,"viewBox","0 0 512 512"),i(ne,"class","inline-block w-6 h-6 fill-current"),i(Ie,"class","text-[0.75em] font-light normal-case text-base-content text-opacity-60"),i(te,"class","flex flex-col place-items-center"),i(re,"class","btn btn-circle btn-ghost drawer-button"),i(re,"href","https://github.com/veado/thorchain-churn-countdown"),i(oe,"data-tip",`commit a00f5be
`),i(oe,"class","tooltip w-full"),i(we,"class","mt-20 p-4 footer text-base-content footer-center"),i(e,"class","flex flex-col h-screen")},m(f,I){$(f,e,I),o(e,n),o(n,s),o(s,l),o(l,a),o(n,d),F(c,n,null),o(e,A),o(e,m),o(m,p),o(p,T),o(T,B),o(B,g),o(B,We),Y[N].m(B,null),o(B,Te),o(B,de),o(de,P),o(P,Q),o(T,Xe),o(T,W),o(W,O),o(O,Ae),F(X,Ae,null),o(O,Ze),o(O,ge),o(O,Je),o(O,be),o(be,Be),o(O,ze),o(O,Z),o(Z,et),o(Z,Oe),o(Z,tt),o(W,nt),o(W,x),o(x,_e),F(J,_e,null),o(x,st),o(x,ve),o(x,lt),o(x,ke),o(ke,xe),o(x,ot),o(x,z),o(z,rt),M.m(z,null),o(p,at),o(p,$e),o($e,ee),o(ee,G),o(ee,it),o(ee,K),o(e,ct),o(e,we),o(we,oe),o(oe,re),o(re,te),o(te,ne),o(ne,Me),o(te,ut),o(te,Ie),j=!0,He||(mt=[Ce(G,"click",t[9]),Ce(K,"click",t[10])],He=!0)},p(f,[I]){let Fe=N;N=ft(f),N===Fe?Y[N].p(f,I):(ht(),y(Y[Fe],1,1,()=>{Y[Fe]=null}),_t(),E=Y[N],E?E.p(f,I):(E=Y[N]=dt[N](f),E.c()),L(E,1),E.m(B,Te)),(!j||I&8&&fe!==(fe=100-f[3]))&&(Q.value=fe),(!j||I&8&&pe!==(pe=""+(100-Number(f[3].toFixed(2))+"% completed")))&&i(P,"data-tip",pe),(!j||I&16)&&D(Be,f[4]),(!j||I&32)&&he!==(he=(f[5]/1e3).toFixed(2)+"")&&D(Oe,he),(!j||I&64)&&D(xe,f[6]),Le===(Le=pt(f))&&M?M.p(f,I):(M.d(1),M=Le(f),M&&(M.c(),M.m(z,null))),I&1&&Ee(G,"btn-active",f[0]==="human"),I&1&&Ee(K,"btn-active",f[0]==="block")},i(f){j||(L(c.$$.fragment,f),L(E),L(X.$$.fragment,f),L(J.$$.fragment,f),j=!0)},o(f){y(c.$$.fragment,f),y(E),y(X.$$.fragment,f),y(J.$$.fragment,f),j=!1},d(f){f&&w(e),S(c),Y[N].d(),S(X),S(J),M.d(),He=!1,Ut(mt)}}}function Hn(t,e,n){let s,l,a,r,d,c,A,m;V(t,Cn,g=>n(1,s=g)),V(t,Qe,g=>n(2,l=g)),V(t,Nn,g=>n(3,a=g)),V(t,Et,g=>n(4,r=g)),V(t,Pe,g=>n(5,d=g)),V(t,Tt,g=>n(6,c=g)),V(t,En,g=>n(7,A=g)),V(t,Ge,g=>n(8,m=g));let p="human";return Pt(async()=>{mn()}),[p,s,l,a,r,d,c,A,m,()=>n(0,p="human"),()=>n(0,p="block")]}class Fn extends ae{constructor(e){super();ie(this,e,Hn,Mn,ce,{})}}new Fn({target:document.getElementById("app")});
