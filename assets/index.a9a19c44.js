import{S as se,i as le,s as oe,e as u,a as _,t as v,b as rt,c,d as $,f as r,g as R,n as te,h as w,j as H,m as F,k as L,l as y,o as S,p as j,q as at,r as ve,u as vt,_ as g,w as kt,O as k,v as it,x as ct,y as Y,I as ke,z as $t,A as $e,M as wt,B as ne,C as It,D as Ne,E as b,F as re,G as T,H as ae,J as Lt,K as yt,L as P,N as Et,P as Tt,Q as Ct,R as Be,T as Nt,U as Bt,V as Ot,W as Mt,X as xt,Y as we,Z as Ht,$ as Ft}from"./vendor.60ea9858.js";const St=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerpolicy&&(a.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?a.credentials="include":l.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(l){if(l.ep)return;l.ep=!0;const a=n(l);fetch(l.href,a)}};St();const Oe={days:0,hours:0,minutes:0,seconds:0},jt=5850,ut={timestamp:0,height:0,time:"0"};function Dt(t){let e,n,s,l,a;return{c(){e=u("div"),n=u("span"),s=u("span"),l=_(),a=v(t[1]),rt(s,"--value",t[0]),c(n,"class","font-mono text-8xl countdown"),c(e,"class","flex flex-col p-2 bg-neutral rounded-box text-neutral-content")},m(o,d){$(o,e,d),r(e,n),r(n,s),r(e,l),r(e,a)},p(o,[d]){d&1&&rt(s,"--value",o[0]),d&2&&R(a,o[1])},i:te,o:te,d(o){o&&w(e)}}}function Rt(t,e,n){let{value:s=0}=e,{label:l=""}=e;return t.$$set=a=>{"value"in a&&n(0,s=a.value),"label"in a&&n(1,l=a.label)},[s,l]}class Me extends se{constructor(e){super();le(this,e,Rt,Dt,oe,{value:0,label:1})}}function Yt(t){let e,n,s,l,a,o,d;return n=new Me({props:{label:"days",value:t[0].days}}),l=new Me({props:{label:"hours",value:t[0].hours}}),o=new Me({props:{label:"minutes",value:t[0].minutes}}),{c(){e=u("div"),H(n.$$.fragment),s=_(),H(l.$$.fragment),a=_(),H(o.$$.fragment),c(e,"class","grid grid-flow-col justify-center gap-5")},m(i,p){$(i,e,p),F(n,e,null),r(e,s),F(l,e,null),r(e,a),F(o,e,null),d=!0},p(i,[p]){const m={};p&1&&(m.value=i[0].days),n.$set(m);const A={};p&1&&(A.value=i[0].hours),l.$set(A);const N={};p&1&&(N.value=i[0].minutes),o.$set(N)},i(i){d||(L(n.$$.fragment,i),L(l.$$.fragment,i),L(o.$$.fragment,i),d=!0)},o(i){y(n.$$.fragment,i),y(l.$$.fragment,i),y(o.$$.fragment,i),d=!1},d(i){i&&w(e),S(n),S(l),S(o)}}}function qt(t,e,n){let{time:s=Oe}=e;return t.$$set=l=>{"time"in l&&n(0,s=l.time)},[s]}class Vt extends se{constructor(e){super();le(this,e,qt,Yt,oe,{time:0})}}function Gt(t){let e,n,s,l,a;return{c(){e=u("div"),n=u("span"),s=u("span"),l=v(t[0]),a=v(`
  blocks`),c(n,"class","font-mono text-8xl"),c(e,"class","flex flex-auto flex-col p-2 bg-neutral rounded-box text-neutral-content")},m(o,d){$(o,e,d),r(e,n),r(n,s),r(s,l),r(e,a)},p(o,[d]){d&1&&R(l,o[0])},i:te,o:te,d(o){o&&w(e)}}}function Kt(t,e,n){let{blocks:s=0}=e;return t.$$set=l=>{"blocks"in l&&n(0,s=l.blocks)},[s]}class Pt extends se{constructor(e){super();le(this,e,Kt,Gt,oe,{blocks:0})}}var Qt="data:image/png;base64,AAAAGGZ0eXBhdmlmAAAAAG1pZjFtaWFmAAAA0m1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAHBpY3QAAAAAAAAAAAAAAAAAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAAA8gAAAPgAAAAjaWluZgAAAAAAAQAAABVpbmZlAgAAAAABAABhdjAxAAAAAFZpcHJwAAAAOGlwY28AAAAUaXNwZQAAAAAAAAAoAAAAKAAAAAxhdjFDgT8AAAAAABBwaXhpAAAAAAMICAgAAAAWaXBtYQAAAAAAAAABAAEDAYIDAAABAG1kYXQSAAoJP9VnnLQENAVAMugBZS5DUTcgYAAQqA+sAAAAAAAAoVAYEEEVYBck/Cs/7nC7l0TeFCyL1pJ/YXjyVKaPXVLX/WtlF49C7yB9BpBD8GFnTYwbFxdnpcOyKoIyqcdikSQNNMOTJi6B5fugsob903TRBOOgYYVv2qFycemXC6VjKK2VpyWrON64NFni69cskX+EC39xMb1n+PDNYjs74wy+jk/k/ZQwubO9eV08FwdGqE1qtlZEAveLwn3UDwqHxh7zEYN56tdjqnMrJqjjvy8Su/rCEF7guQqVvNretXMnNt+R8fMDZYmmseQu+Hx5BqtSbFnzyA==",V;(function(t){t.DARK="dark",t.LIGHT="light"})(V||(V={}));const Ut=j({"mimir//CHURNINTERVAL":at}),Wt=j({int_64_values:j({ChurnInterval:at})}),Xt=j({nextChurnHeight:ve}),mt=j({result:j({query:ve,data:j({value:j({block:j({header:j({time:ve,height:ve})})})})})}),dt=V.DARK,ft="tcc-theme",Zt=t=>t===V.DARK||t===V.LIGHT,At=t=>document.documentElement.setAttribute("data-theme",t),Jt=()=>g.pipe(localStorage.getItem(ft),k.fromNullable,k.chain(k.fromPredicate(Zt)),k.getOrElse(()=>dt)),xe=kt(dt),zt=()=>{const t=Jt();At(t),xe.set(t)},pt=t=>{At(t),localStorage.setItem(ft,t),xe.set(t)},en=vt(xe,g.identity);function tn(t){let e,n,s,l,a;return n=new ke({props:{src:$t,size:"24",solid:!0,class:"text-white-500"}}),{c(){e=u("button"),H(n.$$.fragment),c(e,"class","btn btn-circle btn-ghost")},m(o,d){$(o,e,d),F(n,e,null),s=!0,l||(a=$e(e,"click",t[2]),l=!0)},p:te,i(o){s||(L(n.$$.fragment,o),s=!0)},o(o){y(n.$$.fragment,o),s=!1},d(o){o&&w(e),S(n),l=!1,a()}}}function nn(t){let e,n,s,l,a;return n=new ke({props:{src:wt,size:"24",solid:!0,class:"text-yellow-500"}}),{c(){e=u("button"),H(n.$$.fragment),c(e,"class","btn btn-circle btn-ghost")},m(o,d){$(o,e,d),F(n,e,null),s=!0,l||(a=$e(e,"click",t[1]),l=!0)},p:te,i(o){s||(L(n.$$.fragment,o),s=!0)},o(o){y(n.$$.fragment,o),s=!1},d(o){o&&w(e),S(n),l=!1,a()}}}function sn(t){let e,n,s,l;const a=[nn,tn],o=[];function d(i,p){return i[0]===V.LIGHT?0:1}return n=d(t),s=o[n]=a[n](t),{c(){e=u("div"),s.c(),c(e,"class","flex-none")},m(i,p){$(i,e,p),o[n].m(e,null),l=!0},p(i,[p]){let m=n;n=d(i),n===m?o[n].p(i,p):(it(),y(o[m],1,1,()=>{o[m]=null}),ct(),s=o[n],s?s.p(i,p):(s=o[n]=a[n](i),s.c()),L(s,1),s.m(e,null))},i(i){l||(L(s),l=!0)},o(i){y(s),l=!1},d(i){i&&w(e),o[n].d()}}}function ln(t,e,n){let s;return Y(t,en,o=>n(0,s=o)),[s,()=>pt(V.DARK),()=>pt(V.LIGHT)]}class on extends se{constructor(e){super();le(this,e,ln,sn,oe,{})}}const rn=t=>!!t,ht=(t,e)=>rn(t)?t:e;ne.extend(It);const He=ht("https://midgard.thorchain.info/v2","https://midgard.thorchain.info/v2"),an=ht("wss://rpc.thorchain.info/websocket","wss://rpc.thorchain.info/websocket"),cn=g.pipe(Ne.getJSON(`${He}/thorchain/mimir`),b(t=>Ut.decode(t)),b(t=>T.mapLeft(e=>Error(`Failed to load mimir ${Be.report(t)}`))(t)),re(1)),un=g.pipe(cn,b(T.map(t=>t["mimir//CHURNINTERVAL"]))),mn=g.pipe(Ne.getJSON(`${He}/thorchain/constants`),b(t=>Wt.decode(t)),b(t=>T.mapLeft(e=>Error(`Failed to load constants from Midgard ${Be.report(t)}`))(t)),re(1)),dn=g.pipe(mn,b(T.map(t=>t.int_64_values.ChurnInterval))),Fe=g.pipe(ae([un,Lt(0,5*60*1e3)]),yt(([t,e])=>g.pipe(t,T.fold(()=>dn,n=>Nt(T.right(n))))),b(t=>T.getOrElse(()=>0)(t)),P(0)),fn=g.pipe(Ne.getJSON(`${He}/network`),b(t=>Xt.decode(t)),b(t=>T.mapLeft(e=>Error(`Failed to load network data from Midgard ${Be.report(t)}`))(t)),re(1)),Se=new Et([]),An=Tt(an),pn=An.multiplex(()=>({jsonrpc:"2.0",id:1,method:"subscribe",params:["tm.event='NewBlock'"]}),()=>({method:"unsubscribe",params:["tm.event='NewBlock'"]}),t=>g.pipe(mt.decode(t),T.fold(()=>!1,e=>e.result.query==="tm.event='NewBlock'"))).pipe(b(t=>g.pipe(mt.decode(t),T.fold(()=>ut,e=>({time:e.result.data.value.block.header.time,timestamp:ne(e.result.data.value.block.header.time).valueOf(),height:parseInt(e.result.data.value.block.header.height)})))),P(ut),Ct(),b(([t,e])=>{if(t.timestamp>0){const n=ne(e.timestamp).diff(ne(t.timestamp));Se.next([...Se.getValue(),n])}return e}),re(1)),gt="tcc-btime",je=()=>g.pipe(localStorage.getItem(gt),k.fromNullable,k.map(parseInt),k.chain(k.fromPredicate(Number.isInteger)),k.getOrElse(()=>jt)),De=Se.pipe(b(t=>t.length?g.pipe(t,Bt.reduce(0,(e,n)=>e+n),k.fromPredicate(e=>e>0),k.map(e=>Math.round(e/t.length)),k.map(e=>Math.round(e/100)*100),k.map(e=>Math.min(e,6e3)),k.map(e=>Math.max(e,5500)),k.map(e=>(localStorage.setItem(gt,e.toString()),e)),k.getOrElse(()=>je())):je()),re(1),P(je())),bt=g.pipe(pn,b(({height:t})=>t),P(0)),_t=g.pipe(fn,b(t=>g.pipe(t,T.map(({nextChurnHeight:e})=>parseInt(e)))),b(T.getOrElse(()=>0)),P(0)),Re=g.pipe(ae([_t,bt]),b(([t,e])=>!t||!e?0:t-e)),hn=g.pipe(ae([Fe,Re]),b(([t,e])=>!t||!e?1:e*100/t)),gn=g.pipe(ae([Re,De]),b(([t,e])=>{const n=t*e,s=ne.duration(n);return{seconds:s.get("seconds"),minutes:s.get("minutes"),hours:s.get("hours"),days:s.get("days")}}),P(Oe)),bn=g.pipe(ae([Fe,De]),b(([t,e])=>{const n=t*e,s=ne.duration(n);return{seconds:0,minutes:s.get("minutes"),hours:s.get("hours"),days:s.get("days")}}),P(Oe));function _n(t){let e,n;return e=new Pt({props:{blocks:t[2]}}),{c(){H(e.$$.fragment)},m(s,l){F(e,s,l),n=!0},p(s,l){const a={};l&4&&(a.blocks=s[2]),e.$set(a)},i(s){n||(L(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){S(e,s)}}}function vn(t){let e,n;return e=new Vt({props:{time:t[1]}}),{c(){H(e.$$.fragment)},m(s,l){F(e,s,l),n=!0},p(s,l){const a={};l&2&&(a.time=s[1]),e.$set(a)},i(s){n||(L(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){S(e,s)}}}function kn(t){let e,n;return{c(){e=v(t[8]),n=v(" blocks")},m(s,l){$(s,e,l),$(s,n,l)},p(s,l){l&256&&R(e,s[8])},d(s){s&&w(e),s&&w(n)}}}function $n(t){let e=t[7].days+"",n,s,l=t[7].hours+"",a,o,d=t[7].minutes+"",i,p;return{c(){n=v(e),s=v("d "),a=v(l),o=v("h "),i=v(d),p=v("m")},m(m,A){$(m,n,A),$(m,s,A),$(m,a,A),$(m,o,A),$(m,i,A),$(m,p,A)},p(m,A){A&128&&e!==(e=m[7].days+"")&&R(n,e),A&128&&l!==(l=m[7].hours+"")&&R(a,l),A&128&&d!==(d=m[7].minutes+"")&&R(i,d)},d(m){m&&w(n),m&&w(s),m&&w(a),m&&w(o),m&&w(i),m&&w(p)}}}function wn(t){let e,n,s,l,a,o,d,i,p,m,A,N,B,h,Ye,E,C,Ie,ie,Q,U,ce,qe,W,O,ue,X,Ve,me,Ge,de,Le,Ke,Z,Pe,fe=(t[5]/1e3).toFixed(2)+"",ye,Qe,Ue,M,Ae,J,We,pe,Xe,he,Ee,Ze,z,Je,ze,ge,ee,G,et,K,tt,be,D,Te,nt;i=new on({});const st=[vn,_n],q=[];function lt(f,I){return f[0]==="human"?0:1}E=lt(t),C=q[E]=st[E](t),X=new ke({props:{src:Ot,size:"48",class:"outline-none"}}),J=new ke({props:{src:Mt,size:"48",class:"outline-none"}});function ot(f,I){return f[0]==="human"?$n:kn}let _e=ot(t),x=_e(t);return{c(){e=u("div"),n=u("div"),s=u("div"),l=u("a"),a=u("img"),d=_(),H(i.$$.fragment),p=_(),m=u("main"),A=u("div"),N=u("div"),B=u("div"),h=u("h1"),h.textContent="CHURN COUNTDOWN",Ye=_(),C.c(),Ie=_(),ie=u("div"),Q=u("div"),U=u("progress"),qe=_(),W=u("div"),O=u("div"),ue=u("div"),H(X.$$.fragment),Ve=_(),me=u("div"),me.textContent="Current block",Ge=_(),de=u("div"),Le=v(t[4]),Ke=_(),Z=u("div"),Pe=v("~"),ye=v(fe),Qe=v(" s/b"),Ue=_(),M=u("div"),Ae=u("div"),H(J.$$.fragment),We=_(),pe=u("div"),pe.textContent="Churn block",Xe=_(),he=u("div"),Ee=v(t[6]),Ze=_(),z=u("div"),Je=v(`Churn interval:
              `),x.c(),ze=_(),ge=u("div"),ee=u("div"),G=u("button"),G.innerHTML="Human<br/> time",et=_(),K=u("button"),K.innerHTML="Block<br/>time",tt=_(),be=u("footer"),be.innerHTML='<a class="btn btn-circle btn-ghost drawer-button" href="https://github.com/veado/thorchain-churn-countdown"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="inline-block w-6 h-6 fill-current"><path d="M256,32C132.3,32,32,134.9,32,261.7c0,101.5,64.2,187.5,153.2,217.9a17.56,17.56,0,0,0,3.8.4c8.3,0,11.5-6.1,11.5-11.4,0-5.5-.2-19.9-.3-39.1a102.4,102.4,0,0,1-22.6,2.7c-43.1,0-52.9-33.5-52.9-33.5-10.2-26.5-24.9-33.6-24.9-33.6-19.5-13.7-.1-14.1,1.4-14.1h.1c22.5,2,34.3,23.8,34.3,23.8,11.2,19.6,26.2,25.1,39.6,25.1a63,63,0,0,0,25.6-6c2-14.8,7.8-24.9,14.2-30.7-49.7-5.8-102-25.5-102-113.5,0-25.1,8.7-45.6,23-61.6-2.3-5.8-10-29.2,2.2-60.8a18.64,18.64,0,0,1,5-.5c8.1,0,26.4,3.1,56.6,24.1a208.21,208.21,0,0,1,112.2,0c30.2-21,48.5-24.1,56.6-24.1a18.64,18.64,0,0,1,5,.5c12.2,31.6,4.5,55,2.2,60.8,14.3,16.1,23,36.6,23,61.6,0,88.2-52.4,107.6-102.3,113.3,8,7.1,15.2,21.1,15.2,42.5,0,30.7-.3,55.5-.3,63,0,5.4,3.1,11.5,11.4,11.5a19.35,19.35,0,0,0,4-.4C415.9,449.2,480,363.1,480,261.7,480,134.9,379.7,32,256,32Z"></path></svg></a>',xt(a.src,o=Qt)||c(a,"src",o),c(a,"alt","logo"),c(a,"class","mask mask-circle"),c(l,"class","btn btn-circle btn-ghost"),c(l,"href","https://docs.thorchain.org"),c(s,"class","flex-1 px-2 mx-2 py-2"),c(n,"class","navbar mb-2 shadow-lg bg-neutral text-neutral-content"),c(h,"class","text-4xl font-bold pt-2 pb-8"),c(U,"class","progress progress-primary h-8"),U.value=t[3],c(U,"max","100"),c(Q,"data-tip",ce=""+(t[3].toFixed(2)+"% left")),c(Q,"class","tooltip w-full tooltip-bottom"),c(ie,"class","pt-8"),c(B,"class","card-body"),c(ue,"class","stat-figure"),c(me,"class","stat-title"),c(de,"class","stat-value"),c(Z,"class","stat-desc"),c(O,"class","stat"),c(Ae,"class","stat-figure"),c(pe,"class","stat-title"),c(he,"class","stat-value"),c(z,"class","stat-desc"),c(M,"class","stat"),c(W,"class","w-full shadow stats"),c(N,"class","card text-center shadow-2xl min-w-[36em]"),c(G,"class","btn btn-lg"),we(G,"btn-active",t[0]==="human"),c(K,"class","btn btn-lg"),we(K,"btn-active",t[0]==="block"),c(ee,"class","btn-group"),c(ge,"class","flex justify-center items-center pt-8"),c(m,"class","grid justify-center pt-8 flex-grow"),c(be,"class","mt-20 p-4 footer text-base-content footer-center"),c(e,"class","flex flex-col h-screen")},m(f,I){$(f,e,I),r(e,n),r(n,s),r(s,l),r(l,a),r(n,d),F(i,n,null),r(e,p),r(e,m),r(m,A),r(A,N),r(N,B),r(B,h),r(B,Ye),q[E].m(B,null),r(B,Ie),r(B,ie),r(ie,Q),r(Q,U),r(N,qe),r(N,W),r(W,O),r(O,ue),F(X,ue,null),r(O,Ve),r(O,me),r(O,Ge),r(O,de),r(de,Le),r(O,Ke),r(O,Z),r(Z,Pe),r(Z,ye),r(Z,Qe),r(W,Ue),r(W,M),r(M,Ae),F(J,Ae,null),r(M,We),r(M,pe),r(M,Xe),r(M,he),r(he,Ee),r(M,Ze),r(M,z),r(z,Je),x.m(z,null),r(A,ze),r(A,ge),r(ge,ee),r(ee,G),r(ee,et),r(ee,K),r(e,tt),r(e,be),D=!0,Te||(nt=[$e(G,"click",t[9]),$e(K,"click",t[10])],Te=!0)},p(f,[I]){let Ce=E;E=lt(f),E===Ce?q[E].p(f,I):(it(),y(q[Ce],1,1,()=>{q[Ce]=null}),ct(),C=q[E],C?C.p(f,I):(C=q[E]=st[E](f),C.c()),L(C,1),C.m(B,Ie)),(!D||I&8)&&(U.value=f[3]),(!D||I&8&&ce!==(ce=""+(f[3].toFixed(2)+"% left")))&&c(Q,"data-tip",ce),(!D||I&16)&&R(Le,f[4]),(!D||I&32)&&fe!==(fe=(f[5]/1e3).toFixed(2)+"")&&R(ye,fe),(!D||I&64)&&R(Ee,f[6]),_e===(_e=ot(f))&&x?x.p(f,I):(x.d(1),x=_e(f),x&&(x.c(),x.m(z,null))),I&1&&we(G,"btn-active",f[0]==="human"),I&1&&we(K,"btn-active",f[0]==="block")},i(f){D||(L(i.$$.fragment,f),L(C),L(X.$$.fragment,f),L(J.$$.fragment,f),D=!0)},o(f){y(i.$$.fragment,f),y(C),y(X.$$.fragment,f),y(J.$$.fragment,f),D=!1},d(f){f&&w(e),S(i),q[E].d(),S(X),S(J),x.d(),Te=!1,Ht(nt)}}}function In(t,e,n){let s,l,a,o,d,i,p,m;Y(t,gn,h=>n(1,s=h)),Y(t,Re,h=>n(2,l=h)),Y(t,hn,h=>n(3,a=h)),Y(t,bt,h=>n(4,o=h)),Y(t,De,h=>n(5,d=h)),Y(t,_t,h=>n(6,i=h)),Y(t,bn,h=>n(7,p=h)),Y(t,Fe,h=>n(8,m=h));let A="human";return Ft(async()=>{zt()}),[A,s,l,a,o,d,i,p,m,()=>n(0,A="human"),()=>n(0,A="block")]}class Ln extends se{constructor(e){super();le(this,e,In,wn,oe,{})}}new Ln({target:document.getElementById("app")});
